
=== ADVANCED MINIFIED AND ESCAPED SNIPPET FOR EASYSTORE ===

Copy the content between the START and END markers below and paste it into your Postman request body:

=== START ===
<script>!function(){\"use strict\";const e={availabilityEndpoint:window.location.hostname.includes(\"ngrok\")?`${window.location.protocol}//${window.location.hostname}/api/availability`:\"https://stepsandstories.ngrok.app/api/availability\",daysAhead:30,minDaysAhead:1};let n=null,t=null,o={},a=null,i=null;function l(){const n=document.getElementById(\"BuyNowButton\");if(!n)return console.log(\"BuyNowButton not found, retrying in 1 second...\"),void setTimeout(l,1e3);i=function(){const e=[\"h1.product__title\",\".product__title\",\"h1.product-single__title\",\".product-single__title\",'h1[itemprop=\"name\"]',\"[data-product-title]\",\"h1\"];for(const n of e){const e=document.querySelector(n);if(e&&e.textContent)return e.textContent.trim()}return null}(),console.log(\"Detected product name:\",i),n.disabled=!0,n.style.opacity=\"0.5\",n.style.cursor=\"not-allowed\",function(){const e=document.getElementById(\"AddToCart\");if(e){e.style.display=\"none\",console.log(\"Hidden AddToCart button\");const n=e.parentElement;n&&1===n.children.length&&(n.style.display=\"none\")}[\"#AddToCartButton\",'button[name=\"add\"]:not(#BuyNowButton)','input[name=\"add\"]:not(#BuyNowButton)','button[type=\"submit\"]:not(#BuyNowButton)',\".product-form__cart-submit:not(#BuyNowButton)\",\".btn--add-to-cart\"].forEach(e=>{document.querySelectorAll(e).forEach(n=>{\"BuyNowButton\"===n.id||n.classList.contains(\"buy-now\")||(n.style.display=\"none\",console.log(\"Hidden button:\",e))})});new MutationObserver(e=>{const n=document.getElementById(\"AddToCart\");n&&\"none\"!==n.style.display&&(n.style.display=\"none\",console.log(\"Hidden dynamically loaded AddToCart button\"))}).observe(document.body,{childList:!0,subtree:!0})}(),function(){const e=document.getElementById(\"Quantity\");if(e){e.value=\"1\",e.style.display=\"none\";const n=e.closest(\".product-form__quantity\")||e.closest(\".quantity-selector\")||e.closest(\".quantity\")||e.closest(\"quantity-input\");n&&(n.style.display=\"none\");const t=document.querySelector('label[for=\"Quantity\"]');t&&(t.style.display=\"none\"),console.log(\"Hidden quantity input and set to 1\")}document.querySelectorAll(\"quantity-input\").forEach(e=>{e.style.display=\"none\";const n=e.querySelector('input[name=\"quantity\"]');n&&(n.value=\"1\")});document.querySelectorAll(\".quantity-button, .quantity__button, [data-quantity-button]\").forEach(e=>{e.style.display=\"none\"});new MutationObserver(e=>{const n=document.getElementById(\"Quantity\");if(n&&\"none\"!==n.style.display){n.value=\"1\",n.style.display=\"none\";const e=n.closest(\".product-form__quantity\")||n.closest(\".quantity-selector\")||n.closest(\".quantity\")||n.closest(\"quantity-input\");e&&(e.style.display=\"none\"),console.log(\"Hidden dynamically loaded quantity input\")}document.querySelectorAll(\"quantity-input\").forEach(e=>{if(\"none\"!==e.style.display){e.style.display=\"none\";const n=e.querySelector('input[name=\"quantity\"]');n&&(n.value=\"1\"),console.log(\"Hidden dynamically loaded quantity-input element\")}});document.querySelectorAll('.quantity__button:not([style*=\"display: none\"])').forEach(e=>{e.style.display=\"none\"})}).observe(document.body,{childList:!0,subtree:!0})}(),function(n){const o=document.createElement(\"div\");o.id=\"booking-widget\",o.innerHTML='\\n            <div class=\"booking-widget-container\">\\n                <div class=\"booking-step\" id=\"date-selection\">\\n                    <div id=\"calendar-container\">\\n                        <div class=\"calendar-header\">\\n                            <button id=\"prev-month\" class=\"nav-button\">\\n                                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\\n                                    <polyline points=\"15 18 9 12 15 6\"></polyline>\\n                                </svg>\\n                            </button>\\n                            <span id=\"current-month\"></span>\\n                            <button id=\"next-month\" class=\"nav-button\">\\n                                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\\n                                    <polyline points=\"9 18 15 12 9 6\"></polyline>\\n                                </svg>\\n                            </button>\\n                        </div>\\n                        <div id=\"calendar-grid\"></div>\\n                    </div>\\n                    <div id=\"availability-loading\" class=\"loading-indicator\" style=\"display: none;\">\\n                        <div class=\"spinner\"></div>\\n                        <div>Checking availability...</div>\\n                    </div>\\n                </div>\\n                \\n                <div class=\"booking-step\" id=\"time-selection\" style=\"display: none;\">\\n                    <div id=\"time-slots\"></div>\\n                    <button id=\"change-date\" class=\"secondary-button\">\\n                        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\\n                            <polyline points=\"15 18 9 12 15 6\"></polyline>\\n                        </svg>\\n                        Change Date\\n                    </button>\\n                </div>\\n                \\n                <div class=\"booking-summary\" id=\"booking-summary\" style=\"display: none;\">\\n                    <div class=\"summary-content\">\\n                        <strong>Selected Booking:</strong>\\n                        <div id=\"selected-booking-details\"></div>\\n                    </div>\\n                </div>\\n            </div>\\n        ',n.parentNode.insertBefore(o,n),function(){const n=new Date,t=new Date(n);t.setDate(n.getDate()+e.minDaysAhead),r(t)}(),document.getElementById(\"prev-month\").addEventListener(\"click\",e=>{e.preventDefault(),e.stopPropagation();const n=document.getElementById(\"current-month\").textContent,[t,o]=n.split(\" \"),a=[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"].indexOf(t);r(new Date(parseInt(o),a-1,1))}),document.getElementById(\"next-month\").addEventListener(\"click\",e=>{e.preventDefault(),e.stopPropagation();const n=document.getElementById(\"current-month\").textContent,[t,o]=n.split(\" \"),a=[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"].indexOf(t);r(new Date(parseInt(o),a+1,1))}),document.getElementById(\"change-date\").addEventListener(\"click\",e=>{e.preventDefault(),e.stopPropagation(),document.getElementById(\"time-selection\").style.display=\"none\",document.getElementById(\"date-selection\").style.display=\"block\",t=null,c(),document.getElementById(\"booking-summary\").style.display=\"none\"})}(n),function(){const e=document.createElement(\"style\");e.textContent=\"\\n            .booking-widget-container {\\n                background: #ffffff;\\n                border: none;\\n                border-radius: 12px;\\n                padding: 32px;\\n                margin: 24px 0;\\n                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;\\n                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\\n            }\\n            \\n            .booking-step {\\n                padding-top: 0;\\n            }\\n            \\n            .calendar-header {\\n                display: flex;\\n                justify-content: space-between;\\n                align-items: center;\\n                margin-bottom: 28px;\\n            }\\n            \\n            .nav-button {\\n                background: transparent;\\n                color: #1a1a1a;\\n                border: none;\\n                padding: 8px;\\n                border-radius: 8px;\\n                cursor: pointer;\\n                font-size: 20px;\\n                transition: all 0.2s ease;\\n                width: 36px;\\n                height: 36px;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n            }\\n            \\n            .nav-button:hover {\\n                background: #f5f5f5;\\n            }\\n            \\n            #current-month {\\n                font-weight: 600;\\n                font-size: 18px;\\n                color: #1a1a1a;\\n            }\\n            \\n            .calendar-row {\\n                display: grid;\\n                grid-template-columns: repeat(7, 1fr);\\n                gap: 4px;\\n                margin-bottom: 4px;\\n            }\\n            \\n            .calendar-day-header {\\n                text-align: center;\\n                font-weight: 600;\\n                padding: 12px 4px;\\n                font-size: 12px;\\n                color: #666;\\n                text-transform: uppercase;\\n                letter-spacing: 0.5px;\\n            }\\n            \\n            .calendar-day {\\n                text-align: center;\\n                padding: 0;\\n                background: transparent;\\n                cursor: pointer;\\n                min-height: 40px;\\n                height: 40px;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n                font-size: 14px;\\n                color: #1a1a1a;\\n                transition: all 0.15s ease;\\n                border-radius: 8px;\\n                position: relative;\\n                font-weight: 500;\\n            }\\n            \\n            .calendar-day.other-month {\\n                color: #ccc;\\n                cursor: default;\\n            }\\n            \\n            .calendar-day.disabled {\\n                color: #ccc;\\n                cursor: not-allowed;\\n            }\\n            \\n            .calendar-day.has-availability {\\n                color: #333;\\n                font-weight: normal;\\n            }\\n            \\n            .calendar-day.has-availability:hover {\\n                background: #f5f5f5;\\n                cursor: pointer;\\n            }\\n            \\n            .calendar-day.fully-booked {\\n                color: #ccc;\\n                cursor: not-allowed;\\n                text-decoration: line-through;\\n            }\\n            \\n            .calendar-day.closed-day {\\n                color: #ccc;\\n                cursor: not-allowed;\\n                /* No strikethrough for closed days */\\n            }\\n            \\n            .calendar-day.selected {\\n                background: #ff6b35 !important;\\n                color: white;\\n                font-weight: 600;\\n            }\\n            \\n            #time-slots {\\n                display: flex;\\n                flex-direction: column;\\n                gap: 12px;\\n                margin: 24px 0;\\n            }\\n            \\n            .time-slot {\\n                padding: 16px 20px;\\n                border: 2px solid #e5e7eb;\\n                background: white;\\n                border-radius: 10px;\\n                cursor: pointer;\\n                font-size: 16px;\\n                font-weight: 500;\\n                transition: all 0.15s ease;\\n                text-align: center;\\n                color: #1a1a1a;\\n            }\\n            \\n            .time-slot.available:hover {\\n                border-color: #ff6b35;\\n                background: #ffede6;\\n            }\\n            \\n            .time-slot.selected {\\n                background: #ff6b35;\\n                color: white;\\n                border-color: #ff6b35;\\n            }\\n            \\n            .time-slot.booked {\\n                background: #f9fafb;\\n                color: #9ca3af;\\n                cursor: not-allowed;\\n                border-color: #e5e7eb;\\n            }\\n            \\n            .secondary-button {\\n                background: transparent;\\n                color: #6b7280;\\n                border: none;\\n                padding: 12px 24px;\\n                border-radius: 8px;\\n                cursor: pointer;\\n                margin-top: 20px;\\n                font-size: 14px;\\n                font-weight: 500;\\n                transition: all 0.15s ease;\\n                display: inline-flex;\\n                align-items: center;\\n                gap: 8px;\\n            }\\n            \\n            .secondary-button:hover {\\n                background: #f5f5f5;\\n                color: #1a1a1a;\\n            }\\n            \\n            .booking-summary {\\n                background: #fff5f0;\\n                border: 2px solid #ff6b35;\\n                border-radius: 10px;\\n                padding: 20px;\\n                margin-top: 24px;\\n            }\\n            \\n            .booking-detail {\\n                margin: 8px 0;\\n                font-size: 16px;\\n                color: #1a1a1a;\\n                font-weight: 500;\\n            }\\n            \\n            .loading-indicator, .loading, .error, .no-slots {\\n                text-align: center;\\n                padding: 20px;\\n                color: #999;\\n                font-size: 14px;\\n            }\\n            \\n            .loading-indicator {\\n                display: flex;\\n                flex-direction: column;\\n                align-items: center;\\n                gap: 12px;\\n                padding: 30px;\\n            }\\n            \\n            .spinner {\\n                width: 32px;\\n                height: 32px;\\n                border: 3px solid #f3f3f3;\\n                border-top: 3px solid #ff6b35;\\n                border-radius: 50%;\\n                animation: spin 1s linear infinite;\\n            }\\n            \\n            @keyframes spin {\\n                0% { transform: rotate(0deg); }\\n                100% { transform: rotate(360deg); }\\n            }\\n            \\n            .error {\\n                color: #d32f2f;\\n            }\\n            \\n            #BuyNowButton {\\n                position: relative;\\n            }\\n            \\n            /* Calendar grid styling */\\n            #calendar-grid {\\n                border: none;\\n                border-radius: 12px;\\n                overflow: visible;\\n                background: transparent;\\n            }\\n            \\n            /* Modern calendar header styling */\\n            .calendar-header-row {\\n                margin-bottom: 16px;\\n            }\\n            \\n            /* Prevent form submission from widget clicks */\\n            #booking-widget button:not(#BuyNowButton) {\\n                type: button !important;\\n            }\\n        \",document.head.appendChild(e)}(),setTimeout(()=>c(),100)}function r(n){const t=document.getElementById(\"current-month\"),l=document.getElementById(\"calendar-grid\");t.textContent=`${[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"][n.getMonth()]} ${n.getFullYear()}`,l.innerHTML=\"\";const r=document.createElement(\"div\");r.className=\"calendar-row calendar-header-row\",[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"].forEach(e=>{const n=document.createElement(\"div\");n.className=\"calendar-day-header\",n.textContent=e,r.appendChild(n)}),l.appendChild(r);const d=new Date(n.getFullYear(),n.getMonth(),1),c=new Date(n.getFullYear(),n.getMonth()+1,0),u=new Date(d);u.setDate(u.getDate()-d.getDay());const p=new Date,y=new Date(p);y.setDate(p.getDate()+e.minDaysAhead);let g=new Date(u);for(;g<=c||0!==g.getDay();){const t=document.createElement(\"div\");t.className=\"calendar-row\";for(let o=0;o<7;o++){const o=document.createElement(\"div\");o.className=\"calendar-day\";const a=g.getMonth()===n.getMonth(),i=new Date(g.getFullYear(),g.getMonth(),g.getDate())<new Date(y.getFullYear(),y.getMonth(),y.getDate()),l=g>new Date(p.getFullYear(),p.getMonth(),p.getDate()+e.daysAhead);a?i||l?o.classList.add(\"disabled\"):(o.classList.add(\"available-date\"),function(e){o.addEventListener(\"click\",n=>{n.preventDefault(),n.stopPropagation(),s(new Date(e))})}(new Date(g))):o.classList.add(\"other-month\"),o.textContent=g.getDate();const r=`${g.getFullYear()}-${String(g.getMonth()+1).padStart(2,\"0\")}-${String(g.getDate()).padStart(2,\"0\")}`;o.dataset.date=r;const d=[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"][g.getDay()];o.title=`${r} (${d})`,t.appendChild(o),g.setDate(g.getDate()+1)}l.appendChild(t)}!async function(n){const t=document.getElementById(\"availability-loading\");t.style.display=\"block\";try{const t=new Date(n.getFullYear(),n.getMonth(),1),l=new Date(n.getFullYear(),n.getMonth()+1,0),r=new URL(e.availabilityEndpoint);r.searchParams.append(\"start\",t.toISOString().split(\"T\")[0]),r.searchParams.append(\"end\",l.toISOString().split(\"T\")[0]),i&&r.searchParams.append(\"product\",i);const s=await fetch(r.toString()),d=await s.json();d.businessHours&&(a=d.businessHours,console.log(\"Stored business hours from month view:\",a)),d.dates.forEach(e=>{const n=document.querySelector(`[data-date=\"${e.date}\"]`);if(n&&n.classList.contains(\"available-date\")){const[t,o,i]=e.date.split(\"-\").map(Number),l=[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"][new Date(t,o-1,i).getDay()];if(console.log(`Processing ${e.date} (${l}): available=${e.available}, slots=${e.slots?.length||0}`),e.available&&e.slots&&e.slots.length>0)n.classList.add(\"has-availability\");else if(!e.available||e.slots&&0===e.slots.length){0===(a[l]||[]).length?n.classList.add(\"closed-day\"):n.classList.add(\"fully-booked\")}}}),d.dates.forEach(e=>{o[e.date]=e.slots})}catch(e){console.error(\"Error loading availability:\",e),document.querySelectorAll(\".available-date\").forEach(e=>{e.classList.add(\"has-availability\")})}t.style.display=\"none\"}(n)}async function s(l){const r=`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,\"0\")}-${String(l.getDate()).padStart(2,\"0\")}`;n=r,document.querySelectorAll(\".calendar-day\").forEach(e=>{e.classList.remove(\"selected\")});const s=document.querySelector(`[data-date=\"${r}\"]`);s&&s.classList.add(\"selected\"),await async function(l){const r=document.getElementById(\"time-slots\");r.innerHTML='<div class=\"loading\">Loading available times...</div>';try{const s=l.getFullYear(),c=String(l.getMonth()+1).padStart(2,\"0\"),u=`${s}-${c}-${String(l.getDate()).padStart(2,\"0\")}`;let p=o[u];if(!p||!a){console.log(\"Fetching availability for date:\",u);const n=new URL(e.availabilityEndpoint);n.searchParams.append(\"date\",u),i&&n.searchParams.append(\"product\",i);const t=await fetch(n.toString()),o=await t.json();console.log(\"API response:\",o),p=o.slots||[],o.businessHours&&(a=o.businessHours,console.log(\"Loaded business hours from API:\",a))}const y=l.toLocaleDateString(\"en-US\",{weekday:\"long\"});if(!a)return console.error(\"Business hours not loaded! This should not happen.\"),void(r.innerHTML='<div class=\"error\">Error: Business hours not loaded. Please refresh and try again.</div>');const g=a[y]||[];if(console.log(`Time slots for ${y}:`,g),0===g.length)return void(r.innerHTML='<div class=\"no-slots\">Sorry, we\\'re closed on this day.</div>');r.innerHTML=\"\";let m=!1;if(g.forEach(e=>{const o=document.createElement(\"button\");o.className=\"time-slot\",o.textContent=e;!p||p.includes(e)?(m=!0,o.classList.add(\"available\"),o.addEventListener(\"click\",o=>{o.preventDefault(),o.stopPropagation(),function(e,o){t=e,document.querySelectorAll(\".time-slot\").forEach(e=>{e.classList.remove(\"selected\")}),o&&o.target&&o.target.classList.add(\"selected\");(function(){const e=document.getElementById(\"booking-summary\"),o=document.getElementById(\"selected-booking-details\");if(n&&t){const a=new Date(n).toLocaleDateString(\"en-US\",{weekday:\"long\",year:\"numeric\",month:\"long\",day:\"numeric\"});o.innerHTML=`\\n                <div class=\"booking-detail\">${a}</div>\\n                <div class=\"booking-detail\">${t}</div>\\n            `,e.style.display=\"block\",d()}})(),function(){if(n&&t){const e=document.getElementById(\"BuyNowButton\");if(e){e.disabled=!1,e.removeAttribute(\"disabled\"),e.style.opacity=\"1\",e.style.cursor=\"pointer\",e.style.pointerEvents=\"auto\";const n=e.type;e.type=\"button\",e.addEventListener(\"click\",function t(o){o.preventDefault(),o.stopPropagation(),e.classList.add(\"btn--loading\"),e.disabled=!0,console.log(\"Intercepting Buy Now to clear cart first...\"),d(),fetch(\"/new_cart\",{method:\"GET\",headers:{\"X-Requested-With\":\"XMLHttpRequest\",Accept:\"application/json\"}}).then(e=>e.json()).then(o=>{const a=o.cart||o;if(a&&a.items&&a.items.length>0){console.log(\"Found \"+a.items.length+\" items in cart, removing them...\");a.items.length;let i=!0;function l(){fetch(\"/new_cart\",{method:\"GET\",headers:{\"X-Requested-With\":\"XMLHttpRequest\",Accept:\"application/json\"}}).then(e=>e.json()).then(o=>{const a=o.cart||o,i=a.items?a.items.length:0;console.log(\"Cart verification - remaining items:\",i),e.classList.remove(\"btn--loading\"),e.disabled=!1,e.removeEventListener(\"click\",t),e.type=n,setTimeout(()=>{console.log(\"Triggering original Buy Now...\"),window.jQuery?window.jQuery(\"#BuyNowButton\").click():e.click(),setTimeout(()=>{e.type=\"button\",e.addEventListener(\"click\",t)},3e3)},1e3)}).catch(o=>{console.error(\"Error verifying cart:\",o),e.classList.remove(\"btn--loading\"),e.disabled=!1,e.removeEventListener(\"click\",t),e.type=n,setTimeout(()=>{window.jQuery?window.jQuery(\"#BuyNowButton\").click():e.click()},500)})}const r=a.items.map(e=>{const n=e.variant_id||e.variant&&e.variant.id;return fetch(\"/cart/remove_item_quantity\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"X-Requested-With\":\"XMLHttpRequest\"},body:JSON.stringify({variant_id:n.toString(),item_id:e.id.toString(),quantity:e.quantity.toString()})}).then(e=>e.json()).then(n=>(console.log(`Removed item ${e.id}`),!0)).catch(e=>(console.error(\"Error removing item:\",e),i=!1,!1))});Promise.all(r).then(e=>{console.log(\"All removal requests completed\"),setTimeout(l,500)})}else console.log(\"Cart is empty, proceeding with Buy Now...\"),e.classList.remove(\"btn--loading\"),e.disabled=!1,e.removeEventListener(\"click\",t),e.type=n,window.jQuery?window.jQuery(\"#BuyNowButton\").click():e.click(),setTimeout(()=>{e.type=\"button\",e.addEventListener(\"click\",t)},2e3)}).catch(o=>{console.error(\"Error retrieving cart:\",o),e.classList.remove(\"btn--loading\"),e.disabled=!1,e.removeEventListener(\"click\",t),e.type=n,window.jQuery?window.jQuery(\"#BuyNowButton\").click():e.click()})})}}}()}(e,o)})):(o.classList.add(\"booked\"),o.disabled=!0),r.appendChild(o)}),!m){const e=document.createElement(\"div\");e.className=\"no-slots\",e.textContent=\"Sorry, no time slots available on this date.\",r.appendChild(e)}}catch(e){console.error(\"Error loading time slots:\",e),r.innerHTML='<div class=\"error\">Error loading times. Please try again.</div>'}}(l),document.getElementById(\"date-selection\").style.display=\"none\",document.getElementById(\"time-selection\").style.display=\"block\"}function d(){const e=document.getElementById(\"BuyNowButton\")?.closest(\"form\");if(!e)return;let o=e.querySelector('input[name=\"properties[Booking Date]\"]'),a=e.querySelector('input[name=\"properties[Booking Time]\"]'),l=e.querySelector('input[name=\"properties[Booking Product]\"]');o||(o=document.createElement(\"input\"),o.type=\"hidden\",o.name=\"properties[Booking Date]\",e.appendChild(o)),a||(a=document.createElement(\"input\"),a.type=\"hidden\",a.name=\"properties[Booking Time]\",e.appendChild(a)),!l&&i&&(l=document.createElement(\"input\"),l.type=\"hidden\",l.name=\"properties[Booking Product]\",e.appendChild(l)),o.value=n,a.value=t,l&&i&&(l.value=i)}function c(){const e=document.getElementById(\"BuyNowButton\");e&&(e.disabled=!0,e.setAttribute(\"disabled\",\"disabled\"),e.style.opacity=\"0.5\",e.style.cursor=\"not-allowed\",e.style.pointerEvents=\"none\",e.onclick=function(e){if(!n||!t)return e.preventDefault(),e.stopPropagation(),!1})}var u;u=function(){l(),function(){const e=document.getElementById(\"cart-icon-bubble\");e&&(e.style.display=\"none\",console.log(\"Hidden cart button\")),new MutationObserver(e=>{const n=document.getElementById(\"cart-icon-bubble\");n&&\"none\"!==n.style.display&&(n.style.display=\"none\",console.log(\"Hidden dynamically loaded cart button\"))}).observe(document.body,{childList:!0,subtree:!0})}()},\"loading\"!==document.readyState?u():document.addEventListener(\"DOMContentLoaded\",u)}();</script>
=== END ===

File size comparison:
- Original: 49674 characters
- Minified: 24080 characters
- Reduction: 52%

Instructions for Postman:
1. Copy the escaped content between START and END markers above
2. In Postman, create a request to update your EasyStore snippet
3. Use this escaped content as the value for the snippet field in your JSON body
4. Example JSON body:
   {
     "snippet": {
       "content": "PASTE_ESCAPED_CONTENT_HERE"
     }
   }

Benefits of inline snippet:
- No external script loading delay
- Cart button hidden immediately
- Calendar appears instantly
- Better user experience

Alternative: If you need just the minified JavaScript (no HTML wrapper):
=== MINIFIED JS START ===
!function(){\"use strict\";const e={availabilityEndpoint:window.location.hostname.includes(\"ngrok\")?`${window.location.protocol}//${window.location.hostname}/api/availability`:\"https://stepsandstories.ngrok.app/api/availability\",daysAhead:30,minDaysAhead:1};let n=null,t=null,o={},a=null,i=null;function l(){const n=document.getElementById(\"BuyNowButton\");if(!n)return console.log(\"BuyNowButton not found, retrying in 1 second...\"),void setTimeout(l,1e3);i=function(){const e=[\"h1.product__title\",\".product__title\",\"h1.product-single__title\",\".product-single__title\",'h1[itemprop=\"name\"]',\"[data-product-title]\",\"h1\"];for(const n of e){const e=document.querySelector(n);if(e&&e.textContent)return e.textContent.trim()}return null}(),console.log(\"Detected product name:\",i),n.disabled=!0,n.style.opacity=\"0.5\",n.style.cursor=\"not-allowed\",function(){const e=document.getElementById(\"AddToCart\");if(e){e.style.display=\"none\",console.log(\"Hidden AddToCart button\");const n=e.parentElement;n&&1===n.children.length&&(n.style.display=\"none\")}[\"#AddToCartButton\",'button[name=\"add\"]:not(#BuyNowButton)','input[name=\"add\"]:not(#BuyNowButton)','button[type=\"submit\"]:not(#BuyNowButton)',\".product-form__cart-submit:not(#BuyNowButton)\",\".btn--add-to-cart\"].forEach(e=>{document.querySelectorAll(e).forEach(n=>{\"BuyNowButton\"===n.id||n.classList.contains(\"buy-now\")||(n.style.display=\"none\",console.log(\"Hidden button:\",e))})});new MutationObserver(e=>{const n=document.getElementById(\"AddToCart\");n&&\"none\"!==n.style.display&&(n.style.display=\"none\",console.log(\"Hidden dynamically loaded AddToCart button\"))}).observe(document.body,{childList:!0,subtree:!0})}(),function(){const e=document.getElementById(\"Quantity\");if(e){e.value=\"1\",e.style.display=\"none\";const n=e.closest(\".product-form__quantity\")||e.closest(\".quantity-selector\")||e.closest(\".quantity\")||e.closest(\"quantity-input\");n&&(n.style.display=\"none\");const t=document.querySelector('label[for=\"Quantity\"]');t&&(t.style.display=\"none\"),console.log(\"Hidden quantity input and set to 1\")}document.querySelectorAll(\"quantity-input\").forEach(e=>{e.style.display=\"none\";const n=e.querySelector('input[name=\"quantity\"]');n&&(n.value=\"1\")});document.querySelectorAll(\".quantity-button, .quantity__button, [data-quantity-button]\").forEach(e=>{e.style.display=\"none\"});new MutationObserver(e=>{const n=document.getElementById(\"Quantity\");if(n&&\"none\"!==n.style.display){n.value=\"1\",n.style.display=\"none\";const e=n.closest(\".product-form__quantity\")||n.closest(\".quantity-selector\")||n.closest(\".quantity\")||n.closest(\"quantity-input\");e&&(e.style.display=\"none\"),console.log(\"Hidden dynamically loaded quantity input\")}document.querySelectorAll(\"quantity-input\").forEach(e=>{if(\"none\"!==e.style.display){e.style.display=\"none\";const n=e.querySelector('input[name=\"quantity\"]');n&&(n.value=\"1\"),console.log(\"Hidden dynamically loaded quantity-input element\")}});document.querySelectorAll('.quantity__button:not([style*=\"display: none\"])').forEach(e=>{e.style.display=\"none\"})}).observe(document.body,{childList:!0,subtree:!0})}(),function(n){const o=document.createElement(\"div\");o.id=\"booking-widget\",o.innerHTML='\\n            <div class=\"booking-widget-container\">\\n                <div class=\"booking-step\" id=\"date-selection\">\\n                    <div id=\"calendar-container\">\\n                        <div class=\"calendar-header\">\\n                            <button id=\"prev-month\" class=\"nav-button\">\\n                                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\\n                                    <polyline points=\"15 18 9 12 15 6\"></polyline>\\n                                </svg>\\n                            </button>\\n                            <span id=\"current-month\"></span>\\n                            <button id=\"next-month\" class=\"nav-button\">\\n                                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\\n                                    <polyline points=\"9 18 15 12 9 6\"></polyline>\\n                                </svg>\\n                            </button>\\n                        </div>\\n                        <div id=\"calendar-grid\"></div>\\n                    </div>\\n                    <div id=\"availability-loading\" class=\"loading-indicator\" style=\"display: none;\">\\n                        <div class=\"spinner\"></div>\\n                        <div>Checking availability...</div>\\n                    </div>\\n                </div>\\n                \\n                <div class=\"booking-step\" id=\"time-selection\" style=\"display: none;\">\\n                    <div id=\"time-slots\"></div>\\n                    <button id=\"change-date\" class=\"secondary-button\">\\n                        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\\n                            <polyline points=\"15 18 9 12 15 6\"></polyline>\\n                        </svg>\\n                        Change Date\\n                    </button>\\n                </div>\\n                \\n                <div class=\"booking-summary\" id=\"booking-summary\" style=\"display: none;\">\\n                    <div class=\"summary-content\">\\n                        <strong>Selected Booking:</strong>\\n                        <div id=\"selected-booking-details\"></div>\\n                    </div>\\n                </div>\\n            </div>\\n        ',n.parentNode.insertBefore(o,n),function(){const n=new Date,t=new Date(n);t.setDate(n.getDate()+e.minDaysAhead),r(t)}(),document.getElementById(\"prev-month\").addEventListener(\"click\",e=>{e.preventDefault(),e.stopPropagation();const n=document.getElementById(\"current-month\").textContent,[t,o]=n.split(\" \"),a=[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"].indexOf(t);r(new Date(parseInt(o),a-1,1))}),document.getElementById(\"next-month\").addEventListener(\"click\",e=>{e.preventDefault(),e.stopPropagation();const n=document.getElementById(\"current-month\").textContent,[t,o]=n.split(\" \"),a=[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"].indexOf(t);r(new Date(parseInt(o),a+1,1))}),document.getElementById(\"change-date\").addEventListener(\"click\",e=>{e.preventDefault(),e.stopPropagation(),document.getElementById(\"time-selection\").style.display=\"none\",document.getElementById(\"date-selection\").style.display=\"block\",t=null,c(),document.getElementById(\"booking-summary\").style.display=\"none\"})}(n),function(){const e=document.createElement(\"style\");e.textContent=\"\\n            .booking-widget-container {\\n                background: #ffffff;\\n                border: none;\\n                border-radius: 12px;\\n                padding: 32px;\\n                margin: 24px 0;\\n                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;\\n                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\\n            }\\n            \\n            .booking-step {\\n                padding-top: 0;\\n            }\\n            \\n            .calendar-header {\\n                display: flex;\\n                justify-content: space-between;\\n                align-items: center;\\n                margin-bottom: 28px;\\n            }\\n            \\n            .nav-button {\\n                background: transparent;\\n                color: #1a1a1a;\\n                border: none;\\n                padding: 8px;\\n                border-radius: 8px;\\n                cursor: pointer;\\n                font-size: 20px;\\n                transition: all 0.2s ease;\\n                width: 36px;\\n                height: 36px;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n            }\\n            \\n            .nav-button:hover {\\n                background: #f5f5f5;\\n            }\\n            \\n            #current-month {\\n                font-weight: 600;\\n                font-size: 18px;\\n                color: #1a1a1a;\\n            }\\n            \\n            .calendar-row {\\n                display: grid;\\n                grid-template-columns: repeat(7, 1fr);\\n                gap: 4px;\\n                margin-bottom: 4px;\\n            }\\n            \\n            .calendar-day-header {\\n                text-align: center;\\n                font-weight: 600;\\n                padding: 12px 4px;\\n                font-size: 12px;\\n                color: #666;\\n                text-transform: uppercase;\\n                letter-spacing: 0.5px;\\n            }\\n            \\n            .calendar-day {\\n                text-align: center;\\n                padding: 0;\\n                background: transparent;\\n                cursor: pointer;\\n                min-height: 40px;\\n                height: 40px;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n                font-size: 14px;\\n                color: #1a1a1a;\\n                transition: all 0.15s ease;\\n                border-radius: 8px;\\n                position: relative;\\n                font-weight: 500;\\n            }\\n            \\n            .calendar-day.other-month {\\n                color: #ccc;\\n                cursor: default;\\n            }\\n            \\n            .calendar-day.disabled {\\n                color: #ccc;\\n                cursor: not-allowed;\\n            }\\n            \\n            .calendar-day.has-availability {\\n                color: #333;\\n                font-weight: normal;\\n            }\\n            \\n            .calendar-day.has-availability:hover {\\n                background: #f5f5f5;\\n                cursor: pointer;\\n            }\\n            \\n            .calendar-day.fully-booked {\\n                color: #ccc;\\n                cursor: not-allowed;\\n                text-decoration: line-through;\\n            }\\n            \\n            .calendar-day.closed-day {\\n                color: #ccc;\\n                cursor: not-allowed;\\n                /* No strikethrough for closed days */\\n            }\\n            \\n            .calendar-day.selected {\\n                background: #ff6b35 !important;\\n                color: white;\\n                font-weight: 600;\\n            }\\n            \\n            #time-slots {\\n                display: flex;\\n                flex-direction: column;\\n                gap: 12px;\\n                margin: 24px 0;\\n            }\\n            \\n            .time-slot {\\n                padding: 16px 20px;\\n                border: 2px solid #e5e7eb;\\n                background: white;\\n                border-radius: 10px;\\n                cursor: pointer;\\n                font-size: 16px;\\n                font-weight: 500;\\n                transition: all 0.15s ease;\\n                text-align: center;\\n                color: #1a1a1a;\\n            }\\n            \\n            .time-slot.available:hover {\\n                border-color: #ff6b35;\\n                background: #ffede6;\\n            }\\n            \\n            .time-slot.selected {\\n                background: #ff6b35;\\n                color: white;\\n                border-color: #ff6b35;\\n            }\\n            \\n            .time-slot.booked {\\n                background: #f9fafb;\\n                color: #9ca3af;\\n                cursor: not-allowed;\\n                border-color: #e5e7eb;\\n            }\\n            \\n            .secondary-button {\\n                background: transparent;\\n                color: #6b7280;\\n                border: none;\\n                padding: 12px 24px;\\n                border-radius: 8px;\\n                cursor: pointer;\\n                margin-top: 20px;\\n                font-size: 14px;\\n                font-weight: 500;\\n                transition: all 0.15s ease;\\n                display: inline-flex;\\n                align-items: center;\\n                gap: 8px;\\n            }\\n            \\n            .secondary-button:hover {\\n                background: #f5f5f5;\\n                color: #1a1a1a;\\n            }\\n            \\n            .booking-summary {\\n                background: #fff5f0;\\n                border: 2px solid #ff6b35;\\n                border-radius: 10px;\\n                padding: 20px;\\n                margin-top: 24px;\\n            }\\n            \\n            .booking-detail {\\n                margin: 8px 0;\\n                font-size: 16px;\\n                color: #1a1a1a;\\n                font-weight: 500;\\n            }\\n            \\n            .loading-indicator, .loading, .error, .no-slots {\\n                text-align: center;\\n                padding: 20px;\\n                color: #999;\\n                font-size: 14px;\\n            }\\n            \\n            .loading-indicator {\\n                display: flex;\\n                flex-direction: column;\\n                align-items: center;\\n                gap: 12px;\\n                padding: 30px;\\n            }\\n            \\n            .spinner {\\n                width: 32px;\\n                height: 32px;\\n                border: 3px solid #f3f3f3;\\n                border-top: 3px solid #ff6b35;\\n                border-radius: 50%;\\n                animation: spin 1s linear infinite;\\n            }\\n            \\n            @keyframes spin {\\n                0% { transform: rotate(0deg); }\\n                100% { transform: rotate(360deg); }\\n            }\\n            \\n            .error {\\n                color: #d32f2f;\\n            }\\n            \\n            #BuyNowButton {\\n                position: relative;\\n            }\\n            \\n            /* Calendar grid styling */\\n            #calendar-grid {\\n                border: none;\\n                border-radius: 12px;\\n                overflow: visible;\\n                background: transparent;\\n            }\\n            \\n            /* Modern calendar header styling */\\n            .calendar-header-row {\\n                margin-bottom: 16px;\\n            }\\n            \\n            /* Prevent form submission from widget clicks */\\n            #booking-widget button:not(#BuyNowButton) {\\n                type: button !important;\\n            }\\n        \",document.head.appendChild(e)}(),setTimeout(()=>c(),100)}function r(n){const t=document.getElementById(\"current-month\"),l=document.getElementById(\"calendar-grid\");t.textContent=`${[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"][n.getMonth()]} ${n.getFullYear()}`,l.innerHTML=\"\";const r=document.createElement(\"div\");r.className=\"calendar-row calendar-header-row\",[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"].forEach(e=>{const n=document.createElement(\"div\");n.className=\"calendar-day-header\",n.textContent=e,r.appendChild(n)}),l.appendChild(r);const d=new Date(n.getFullYear(),n.getMonth(),1),c=new Date(n.getFullYear(),n.getMonth()+1,0),u=new Date(d);u.setDate(u.getDate()-d.getDay());const p=new Date,y=new Date(p);y.setDate(p.getDate()+e.minDaysAhead);let g=new Date(u);for(;g<=c||0!==g.getDay();){const t=document.createElement(\"div\");t.className=\"calendar-row\";for(let o=0;o<7;o++){const o=document.createElement(\"div\");o.className=\"calendar-day\";const a=g.getMonth()===n.getMonth(),i=new Date(g.getFullYear(),g.getMonth(),g.getDate())<new Date(y.getFullYear(),y.getMonth(),y.getDate()),l=g>new Date(p.getFullYear(),p.getMonth(),p.getDate()+e.daysAhead);a?i||l?o.classList.add(\"disabled\"):(o.classList.add(\"available-date\"),function(e){o.addEventListener(\"click\",n=>{n.preventDefault(),n.stopPropagation(),s(new Date(e))})}(new Date(g))):o.classList.add(\"other-month\"),o.textContent=g.getDate();const r=`${g.getFullYear()}-${String(g.getMonth()+1).padStart(2,\"0\")}-${String(g.getDate()).padStart(2,\"0\")}`;o.dataset.date=r;const d=[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"][g.getDay()];o.title=`${r} (${d})`,t.appendChild(o),g.setDate(g.getDate()+1)}l.appendChild(t)}!async function(n){const t=document.getElementById(\"availability-loading\");t.style.display=\"block\";try{const t=new Date(n.getFullYear(),n.getMonth(),1),l=new Date(n.getFullYear(),n.getMonth()+1,0),r=new URL(e.availabilityEndpoint);r.searchParams.append(\"start\",t.toISOString().split(\"T\")[0]),r.searchParams.append(\"end\",l.toISOString().split(\"T\")[0]),i&&r.searchParams.append(\"product\",i);const s=await fetch(r.toString()),d=await s.json();d.businessHours&&(a=d.businessHours,console.log(\"Stored business hours from month view:\",a)),d.dates.forEach(e=>{const n=document.querySelector(`[data-date=\"${e.date}\"]`);if(n&&n.classList.contains(\"available-date\")){const[t,o,i]=e.date.split(\"-\").map(Number),l=[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"][new Date(t,o-1,i).getDay()];if(console.log(`Processing ${e.date} (${l}): available=${e.available}, slots=${e.slots?.length||0}`),e.available&&e.slots&&e.slots.length>0)n.classList.add(\"has-availability\");else if(!e.available||e.slots&&0===e.slots.length){0===(a[l]||[]).length?n.classList.add(\"closed-day\"):n.classList.add(\"fully-booked\")}}}),d.dates.forEach(e=>{o[e.date]=e.slots})}catch(e){console.error(\"Error loading availability:\",e),document.querySelectorAll(\".available-date\").forEach(e=>{e.classList.add(\"has-availability\")})}t.style.display=\"none\"}(n)}async function s(l){const r=`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,\"0\")}-${String(l.getDate()).padStart(2,\"0\")}`;n=r,document.querySelectorAll(\".calendar-day\").forEach(e=>{e.classList.remove(\"selected\")});const s=document.querySelector(`[data-date=\"${r}\"]`);s&&s.classList.add(\"selected\"),await async function(l){const r=document.getElementById(\"time-slots\");r.innerHTML='<div class=\"loading\">Loading available times...</div>';try{const s=l.getFullYear(),c=String(l.getMonth()+1).padStart(2,\"0\"),u=`${s}-${c}-${String(l.getDate()).padStart(2,\"0\")}`;let p=o[u];if(!p||!a){console.log(\"Fetching availability for date:\",u);const n=new URL(e.availabilityEndpoint);n.searchParams.append(\"date\",u),i&&n.searchParams.append(\"product\",i);const t=await fetch(n.toString()),o=await t.json();console.log(\"API response:\",o),p=o.slots||[],o.businessHours&&(a=o.businessHours,console.log(\"Loaded business hours from API:\",a))}const y=l.toLocaleDateString(\"en-US\",{weekday:\"long\"});if(!a)return console.error(\"Business hours not loaded! This should not happen.\"),void(r.innerHTML='<div class=\"error\">Error: Business hours not loaded. Please refresh and try again.</div>');const g=a[y]||[];if(console.log(`Time slots for ${y}:`,g),0===g.length)return void(r.innerHTML='<div class=\"no-slots\">Sorry, we\\'re closed on this day.</div>');r.innerHTML=\"\";let m=!1;if(g.forEach(e=>{const o=document.createElement(\"button\");o.className=\"time-slot\",o.textContent=e;!p||p.includes(e)?(m=!0,o.classList.add(\"available\"),o.addEventListener(\"click\",o=>{o.preventDefault(),o.stopPropagation(),function(e,o){t=e,document.querySelectorAll(\".time-slot\").forEach(e=>{e.classList.remove(\"selected\")}),o&&o.target&&o.target.classList.add(\"selected\");(function(){const e=document.getElementById(\"booking-summary\"),o=document.getElementById(\"selected-booking-details\");if(n&&t){const a=new Date(n).toLocaleDateString(\"en-US\",{weekday:\"long\",year:\"numeric\",month:\"long\",day:\"numeric\"});o.innerHTML=`\\n                <div class=\"booking-detail\">${a}</div>\\n                <div class=\"booking-detail\">${t}</div>\\n            `,e.style.display=\"block\",d()}})(),function(){if(n&&t){const e=document.getElementById(\"BuyNowButton\");if(e){e.disabled=!1,e.removeAttribute(\"disabled\"),e.style.opacity=\"1\",e.style.cursor=\"pointer\",e.style.pointerEvents=\"auto\";const n=e.type;e.type=\"button\",e.addEventListener(\"click\",function t(o){o.preventDefault(),o.stopPropagation(),e.classList.add(\"btn--loading\"),e.disabled=!0,console.log(\"Intercepting Buy Now to clear cart first...\"),d(),fetch(\"/new_cart\",{method:\"GET\",headers:{\"X-Requested-With\":\"XMLHttpRequest\",Accept:\"application/json\"}}).then(e=>e.json()).then(o=>{const a=o.cart||o;if(a&&a.items&&a.items.length>0){console.log(\"Found \"+a.items.length+\" items in cart, removing them...\");a.items.length;let i=!0;function l(){fetch(\"/new_cart\",{method:\"GET\",headers:{\"X-Requested-With\":\"XMLHttpRequest\",Accept:\"application/json\"}}).then(e=>e.json()).then(o=>{const a=o.cart||o,i=a.items?a.items.length:0;console.log(\"Cart verification - remaining items:\",i),e.classList.remove(\"btn--loading\"),e.disabled=!1,e.removeEventListener(\"click\",t),e.type=n,setTimeout(()=>{console.log(\"Triggering original Buy Now...\"),window.jQuery?window.jQuery(\"#BuyNowButton\").click():e.click(),setTimeout(()=>{e.type=\"button\",e.addEventListener(\"click\",t)},3e3)},1e3)}).catch(o=>{console.error(\"Error verifying cart:\",o),e.classList.remove(\"btn--loading\"),e.disabled=!1,e.removeEventListener(\"click\",t),e.type=n,setTimeout(()=>{window.jQuery?window.jQuery(\"#BuyNowButton\").click():e.click()},500)})}const r=a.items.map(e=>{const n=e.variant_id||e.variant&&e.variant.id;return fetch(\"/cart/remove_item_quantity\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"X-Requested-With\":\"XMLHttpRequest\"},body:JSON.stringify({variant_id:n.toString(),item_id:e.id.toString(),quantity:e.quantity.toString()})}).then(e=>e.json()).then(n=>(console.log(`Removed item ${e.id}`),!0)).catch(e=>(console.error(\"Error removing item:\",e),i=!1,!1))});Promise.all(r).then(e=>{console.log(\"All removal requests completed\"),setTimeout(l,500)})}else console.log(\"Cart is empty, proceeding with Buy Now...\"),e.classList.remove(\"btn--loading\"),e.disabled=!1,e.removeEventListener(\"click\",t),e.type=n,window.jQuery?window.jQuery(\"#BuyNowButton\").click():e.click(),setTimeout(()=>{e.type=\"button\",e.addEventListener(\"click\",t)},2e3)}).catch(o=>{console.error(\"Error retrieving cart:\",o),e.classList.remove(\"btn--loading\"),e.disabled=!1,e.removeEventListener(\"click\",t),e.type=n,window.jQuery?window.jQuery(\"#BuyNowButton\").click():e.click()})})}}}()}(e,o)})):(o.classList.add(\"booked\"),o.disabled=!0),r.appendChild(o)}),!m){const e=document.createElement(\"div\");e.className=\"no-slots\",e.textContent=\"Sorry, no time slots available on this date.\",r.appendChild(e)}}catch(e){console.error(\"Error loading time slots:\",e),r.innerHTML='<div class=\"error\">Error loading times. Please try again.</div>'}}(l),document.getElementById(\"date-selection\").style.display=\"none\",document.getElementById(\"time-selection\").style.display=\"block\"}function d(){const e=document.getElementById(\"BuyNowButton\")?.closest(\"form\");if(!e)return;let o=e.querySelector('input[name=\"properties[Booking Date]\"]'),a=e.querySelector('input[name=\"properties[Booking Time]\"]'),l=e.querySelector('input[name=\"properties[Booking Product]\"]');o||(o=document.createElement(\"input\"),o.type=\"hidden\",o.name=\"properties[Booking Date]\",e.appendChild(o)),a||(a=document.createElement(\"input\"),a.type=\"hidden\",a.name=\"properties[Booking Time]\",e.appendChild(a)),!l&&i&&(l=document.createElement(\"input\"),l.type=\"hidden\",l.name=\"properties[Booking Product]\",e.appendChild(l)),o.value=n,a.value=t,l&&i&&(l.value=i)}function c(){const e=document.getElementById(\"BuyNowButton\");e&&(e.disabled=!0,e.setAttribute(\"disabled\",\"disabled\"),e.style.opacity=\"0.5\",e.style.cursor=\"not-allowed\",e.style.pointerEvents=\"none\",e.onclick=function(e){if(!n||!t)return e.preventDefault(),e.stopPropagation(),!1})}var u;u=function(){l(),function(){const e=document.getElementById(\"cart-icon-bubble\");e&&(e.style.display=\"none\",console.log(\"Hidden cart button\")),new MutationObserver(e=>{const n=document.getElementById(\"cart-icon-bubble\");n&&\"none\"!==n.style.display&&(n.style.display=\"none\",console.log(\"Hidden dynamically loaded cart button\"))}).observe(document.body,{childList:!0,subtree:!0})}()},\"loading\"!==document.readyState?u():document.addEventListener(\"DOMContentLoaded\",u)}();
=== MINIFIED JS END ===
